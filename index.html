<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Redirecting‚Ä¶</title>
    <script>
        const queryParams = new URLSearchParams(window.location.search);
        const hash = window.location.hash || '';

        const startParamRaw = queryParams.get('tgWebAppStartParam');
        if (!startParamRaw) {
            document.body.innerText = '–û—à–∏–±–∫–∞: –Ω–µ—Ç tgWebAppStartParam';
            throw new Error('Missing tgWebAppStartParam');
        }

        const segments = startParamRaw.split('-');
        const eventId = segments.shift();
        if (!eventId) {
            document.body.innerText = '–û—à–∏–±–∫–∞: –Ω–µ—Ç eventId';
            throw new Error('Missing eventId');
        }

        const params = new URLSearchParams();
        params.set('tgWebAppStartParam', eventId);

        segments.forEach(seg => {
            const [key, ...rest] = seg.split('=');
            const val = rest.join('=');
            if (key && val) {
                params.set(key, val);
            }
        });

        const finalUrl = `https://qtickets.ru/telegram-iframe?${params.toString()}${hash}`;
        window.location.replace(finalUrl); // üîÅ —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç
    </script>
</head>
<body>
<p>–ü–µ—Ä–µ—Ö–æ–¥–∏–º‚Ä¶</p>
</body>
</html>